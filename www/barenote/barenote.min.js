var Barenote=(function(){var q=0.1;var f="barenote";var p="."+f;var g="barenote_ref_list";var o="."+g;var c="barenote_floating_note";var d="#"+c;var h="barenote_about_indicator";var k="."+h;var j=d+" {background-color: #eeeeee;padding: 0em 1em 0em 1em;border: solid 1px;font-size: 90%;font-family: Helvetica, Sans-serif;line-height: 1.4;-moz-border-radius: .5em;-webkit-border-radius: .5em;border-radius: .5em;opacity: 0.95;}"+o+" {position: relative !important;}"+k+" {position: absolute !important;right: 1px !important;top: 1px !important;cursor: pointer !important;background-color: #2196F3;color: #ffffff;width: 17px;height: 17px;line-height: 17px;font-size: 10px;text-align: center;margin: 0;padding: 0;}";var i='<html><head><title>About</title></head><body style="text-align:center;"><h1>Barenote</h1>version '+q+'<br /><a href="https://github.com/kokufu/Barenote" target="_blank">https://github.com/kokufu/Barenote</a></body></html>';var b=document.createElement("style");$(b).attr("type","text/css").html(j);$("head").prepend(b);var n=function(){var r=$(this).offset().top;$("html,body").animate({scrollTop:r},"fast");return false};var l=(function(){var s=document.createElement("div");var r=false;$(s).attr("id",c).css({cssText:"position: absolute !important;"}).appendTo(document.body);var t=$(s).css("opacity");$(s).hide();s.show=function(u){var y=$(u.data.element).offset();var w=y.left+$(u.data.element).width();var v=y.top+$(u.data.element).height();var x=u.data.text;clearTimeout(r);$(s).stop();$(s).html(x);if(w+420>$(window).width()+$(window).scrollLeft()){w=$(window).width()-420+$(window).scrollLeft()}if(v+$(s).height()>$(window).height()+$(window).scrollTop()){v=v-$(s).height()-15}$(s).css({opacity:t,left:w,top:v});$(s).show()};s.hide=function(){r=setTimeout(function(){$(s).animate({opacity:0},1000,"",function(){$(s).hide()})},500)};return s})();var a=1;var e=[];var m=function(r){var x=r.find(o).length;if(x>1){throw new Error("The rootElement contain "+x+" elements whose class name is '"+o+"'")}var v=(x!=0);var u=$(document.createElement("ol"));if(v){var s=r.find(o).first();s.append(u);var t=$(document.createElement("div"));t.attr("class",h);t.html("?").click(function(){var z=window.open("","","width=500, height=200");z.document.write(i);return false});s.append(t)}var y=a;var w;r.find(p).each(function(B,C){var z=$(C).html();if(!$(C).is("a")){var A=document.createElement("a");$(C).replaceWith(A);C=A}$(C).html(B+1).attr("id","fnref:"+a).attr("href","#fn:"+a).mouseover({element:C,text:z},l.show).mouseout(l.hide);u.append($(bareNoteRef=document.createElement("li")).attr("id","fn:"+a).html(z+"&nbsp;").append($(document.createElement("a")).html("&#8617;").attr("href","#fnref:"+a).click($.proxy(n,C))));if(v){$(C).click($.proxy(n,bareNoteRef))}w=a;a++});this.getRootElement=function(){return r};this.getFirstRefNumber=function(){return y};this.getLastRefNumber=function(){return w};e.push(this);return};m.apply=function(r){if(r==null){r=$("body")}else{r=$(r)}if(r.length==1){return new m(r)}else{var s=[];r.each(function(){s.push(new m($(this)))});return s}};m.getBarenoteList=function(){return e};m.getFloatingNote=function(){return l};return m})();